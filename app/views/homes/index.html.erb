<h1>ホーム</h1>

<% if @posts.present? %>
  <div class="posts-grid" style="display: grid; gap: 20px;">
    <% @posts.each do |post| %>
      <div class="post-card" style="border: 1px solid #ddd; padding: 20px; border-radius: 8px; background: white;">
        <div class="post-header" style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 15px;">
          <div>
            <strong><%= link_to post.post, post_path(post), style: "text-decoration: none; color: #333;" %></strong>
          </div>
          <% streak_count = post.streak_count %>
          <div class="streak-badge" style="background: <%= post.recorded_on > Date.current ? '#ff9800' : (streak_count > 0 ? '#4caf50' : '#87ceeb') %>; color: white; padding: 5px 10px; border-radius: 15px; font-size: 0.8em;">
            <% if post.recorded_on > Date.current %>
              ⏰ 未来の投稿
            <% elsif streak_count > 0 %>
              🔥 <%= streak_count %>日継続中
            <% else %>
              💔 うっかり
            <% end %>
          </div>
        </div>
        
        <div class="post-details" style="font-size: 0.9em; color: #666; line-height: 1.4;">
          <p><strong>投稿者:</strong> <%= post.user.name %></p>
          <p><strong>理由:</strong> <%= post.reason %></p>
          <p><strong>カテゴリ:</strong> <%= post.category&.name %></p>
          <p><strong>日付:</strong> <%= l post.recorded_on, format: :japanese %></p>
        </div>
        
        <div class="post-actions" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee;">
          <%= render 'shared/favorite_button', post: post %>
        </div>
      </div>
    <% end %>
  </div>
  <%= paginate @posts %>
<% else %>
  <p>投稿がありません。</p>
<% end %>
