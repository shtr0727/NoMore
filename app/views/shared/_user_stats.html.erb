<%
  # パラメータ: user (必須), layout (オプション: 'horizontal', 'grid')
  layout ||= 'horizontal'
  
  # 統計データを取得
  posts_count = user.posts.where(is_draft: false).count
  following_count = user.following.count
  followers_count = user.followers.count
  
  # レイアウト別のスタイル設定
  if layout == 'grid'
    container_style = 'display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 15px;'
    item_style = 'text-align: center; padding: 10px; background: #f8f9fa; border-radius: 8px;'
    number_style = 'font-size: 1.4em; font-weight: bold;'
    label_style = 'font-size: 0.8em; color: #666;'
  else # horizontal
    container_style = 'display: flex; gap: 20px; margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 12px;'
    item_style = 'flex: 1; text-align: center; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);'
    number_style = 'font-size: 2em; font-weight: bold; margin-bottom: 5px;'
    label_style = 'color: #666; font-size: 0.9em;'
  end
%>

<div class="user-stats" style="<%= container_style %>">
  <div class="stat-card" style="<%= item_style %>">
    <div style="<%= number_style %> color: #007bff;">
      <%= posts_count %>
    </div>
    <div style="<%= label_style %>">投稿<%= layout == 'grid' ? '' : '数' %></div>
  </div>
  
  <div class="stat-card" style="<%= item_style %>">
    <div style="<%= number_style %> color: #28a745;">
      <% if defined?(following_user_path) %>
        <%= link_to following_user_path(user), style: "text-decoration: none; color: inherit;" do %>
          <%= following_count %>
        <% end %>
      <% else %>
        <%= following_count %>
      <% end %>
    </div>
    <div style="<%= label_style %>">フォロー<%= layout == 'grid' ? '' : '中' %></div>
  </div>
  
  <div class="stat-card" style="<%= item_style %>">
    <div style="<%= number_style %> color: #dc3545;">
      <% if defined?(followers_user_path) %>
        <%= link_to followers_user_path(user), style: "text-decoration: none; color: inherit;" do %>
          <%= followers_count %>
        <% end %>
      <% else %>
        <%= followers_count %>
      <% end %>
    </div>
    <div style="<%= label_style %>">フォロワー</div>
  </div>
</div>
